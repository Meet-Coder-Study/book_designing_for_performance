---
title: 6장 반복적 성능 측정
---

벤치마크는 현재 사이트가 제공하는 사용자 경험의 상태를 이해하기 위해서만 중요한게 아니라 시간에 따라 무엇이 성능에 영향을 미치고 있는지 파악하는 데도 도움이 된다.

### 브라우저 도구

#### 와이슬로우

와이슬로우는 자원의 총 파일 크기를 확인할 수 있고 로딩 시간 개선을 위한 기본 권장사항도 얻을 수 있다. (플러그인 설치가 불가능하여 사용해보지 않음)

> 권장사항을 검토할 때 우리 사이트는 우리가 가장 잘 알고 있다는 사실을 잊어서는 안된다. 권장사항 중에는 사이트에 적용하기 적합하지 않은 항목들이 있을 수 있다. 모든 권장 사항은 읽고 적용이 가능할지 고민해야 하지만 모든 안을 적용하지 못한다 해도 상관없다.

#### 크롬 개발자 도구

크롬 개발자 도구 내 검사(Audits, 아마도 Lighthouse로 바뀐 거겠죠?)에서 제공하는 개선 권장사항을 확인할 수 있다.

네트워크 탭에서 자원에 대한 요청의 타임라인을 확인할 수 있다. 어떤 자원이 로딩할 때 오래 걸리는지, 각 요청마다 어떤 종류의 대기 시간이 발생했는지 쉽게 확인할 수 있다. 중요 랜더링 경로가 양호하고 긴 시간을 잡아먹는 요청이 없다는 것을 확인하기 위해 네트워크 탭을 계속 확인하는 것이 좋다.

쟁크를 구분할 때도 크롬 개발자 도구를 사용할 수 있다. 렌더링 도구창에서 FPS 미터를 켜면 페이지를 스크롤할 때 페이지의 어떤 부분이 프레임 드롭하는지 볼 수 있다.

### 모의테스트

모의테스트는 다른 기기에서 사이트에 접속한 경우에 어떻게 동작하는지 살펴보는 것이다. 인위적 성능 도구를 사용하면 전세계 여러 지역, 다양한 플랫폼에서 접속한 것처럼 테스트가 가능하다.

[웹페이지테스트](https://www.webpagetest.org/)는 가장 인기있고 문서화가 잘 되어있는 테스트 솔루션이다. 기본 설정으로 테스트를 하면 같은 화면을 두 번 확인한다. 이를 통해 페이지에 처음 로딩했을 때와 자원이 캐싱된 후 로딩했을 때를 비교할 수 있다. 보통 다섯 번 정도는 테스트하는 것을 권장한다. 최대 1년 동안의 테스트 결과를 보관하므로 페이지 로딩 시간을 개선할 때 이전에 수행했던 테스트와 비교가 가능하다.

개인 인스턴스를 호스팅해 볼 수도 있는데 이를 통해 개발중인 사이트를 테스트 할 수 있다. 또한 개인 인스턴스에서는 자동화 테스트를 실행할 수 있어 시간을 절약할 수 있는 장점이 있다.

성능 리뷰와 첫 바이트 시간(TTFB), 이미지 압축 점수만 볼 것이 아니라 폭포수 차트를 주의깊게 살펴보아야 한다. 이를 통해서 긴 시간을 잡아먹는 요청을 구별할 수 있다. 어떻게 하면 짧은 폭포수를 가질 수 있을지 고민하자.

### 실제 사용자 모니터링

실제 사용자 모니터링은 사용자가 사이트의 페이지를 방문했을 때 웹 트래픽을 기록하여 사이트를 이용하는데 걸리는 실제 시간을 분석할 수 있게 도와주는 도구다. 구글 애널리틱스, 엠펄스, 글림스 등이 대표적인 실제 사용자 모니터링 도구이다. 이를 통해서

- 지리적 위치 (거주하는 지역과 데이터 센터의 물리적인 거리)
- 네트워크의 종류 (모바일 네트워크, 무선 랜)
- 중간 값과 페이지 로딩 시간의 95번째 백분위수

> 페이지 로딩 속도의 중간 값은 사용자가 페이지를 로딩하는데 걸리는 시간에 대한 일반적인 경우를 설명하는 경우에 유용하다. 한편 95번째 백분위수 지표는 대부분의 사용자가 우수한 사용자 경험을 느끼고 있는지를 확인하는데 유용하다. 95번째 백분위수를 다시 말하면 가장 느린 하위 5% 페이지뷰인데 총 사용자 수의 5%는 무시할 수 없는 숫자다.

95번째 백분위수의 페이지 로딩 시간과 평균 페이지 로딩 시간은 어떻게 다를까? 각 국가에 따라 사이트가 어떻게 다르게 동작할까? 모바일 기기를 통해 접속한 사용자는 어떨지? 사이트 상위 다섯 개 페이지의 로딩 시간들 사이에 큰 차이가 있는지? 등의 내용을 생각해보면 좋을 것이다.

### 시간에 따른 변화

콘텐츠가 추가되고 디자인도 바뀌는 등 사이트는 계속 변하기 때문에 정기적인 사이트 성능 점검을 통해 페이지 크기, 총 로딩 시간, 체감 성능의 큰 변화 혹은 다른 부서에서 비롯된 갑작스러운 일을 최대한 빨리 찾는 것이 중요하다.

예를 들어 새로 추가한 이미지 전시 방식 때문에 로딩 속도가 갑자기 느려졌는가? 사이트 내의 모든 페이지에 마케팅을 위한 스크립트가 추가되었는가? 컨텐츠 담당자가 권장 파일 크기보다 큰 이미지를 업로드했는가? 이처럼 성능에 갑작스러운 일이 생길 때 문제 지점을 찾을 수 있도록 정기적으로 주요 페이지를 검사해야 한다.

혹은 조금씩 꾸준히 성능이 낮아지는 경우도 있을 수 있다. 이럴때는 발견하기도 수정하기도 어렵다. 가능하다면 매주 정기적으로 성능을 벤치마크해 두면 성능 저하가 미세하게 발생하는 경우라도 감지할 수 있다.

3장에서 살펴본 것처럼 정기적으로 이미지를 확인해야 한다. 이미지 스프라이트, 이미지 형식, 압축을 확인하는 정기적인 일정을 만들자. 새로 추가한 이미지는 자동으로 압축이 되는지 필요한 크기에 다라서 제공되는지 확인하자.

사용자가 가장 많이 접속하는 상위 5개 페이지의 크기도 확인하자. 만약 페이지 크기가 눈에 띄게 증가했다면 이유가 무엇인지 찾아 수정하고, 만약 수정할 수 없다면 다른 부분을 개선할 수는 없는지 찾아보자. 그러나 이 모든 작업은 정기적으로 사이트의 성능을 확인하고 시간에 따라 차이점을 비교하기 쉽도록 문서화했을 때만 가능하다.

성능 지표로서의 가치뿐만 아니라 성능 변화의 원인을 파악하기 위해서라도 문서화는 하는 것이 좋다. 문서화를 하면 어떤 종류의 변화가 사이트의 성능에 큰 영향을 주었고, 어떤 것이 그렇지 않은지 등 시간에 따라 확인할 수 있기 때문이다.

(스크립트의 사이즈 변화나 파일의 사이즈 변화를 PR에서 체크할 수 있도록 기본적인 셋팅을 해볼 수 있을 것 같다.)

지속적으로 지켜봐야 할 것이 하나 더 있다. 바로 경쟁 사이트의 로딩 시간이다. 할 수 있다면 경쟁 사이트도 어떻게 동작하는지 지속적으로 테스트하고 벤치마크하자. 이를 통해 그들이 성능을 얼마나 중요하게 생각하고 사이트를 만들 때 어떤 측면의 사용자 경험을 중요하게 여기는지 알 수 있다.
