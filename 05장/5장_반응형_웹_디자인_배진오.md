---
title: 5장 반응형 웹 디자인
---

모바일 기기는 다음과 같은 문제를 가지고 있다.

- 모바일 네트워크의 긴 대기시간
- 배터리를 전원으로 사용하는 하드웨어

이러한 제약사항이 있음에도 불구하고 우리가 디자인하는 웹 사이트는 사용자에게 불필요한 오버헤드를 줄여 체감 성능을 최적화 해야한다.

### 전략적 컨텐츠 로딩

미디어 쿼리를 잘못 사용하면 엄청난 오버헤드를 줄 수도 있다. 특히 데스크톱 버전으로 디자인 한 후 모바일을 디자인 할 때 이러한 현상이 자주 발생한다. 따라서 이러한 점을 고려해 어떤 콘텐츠를 어떻게 로딩할지 결정하고 사용자에게 꼭 필요한 바이트만 전달하도록 해야한다.

#### 이미지

이미지는 페이지에 표시되는 크기와 동일한 이미지를 제공해야 한다.

레티나 화면은 같은 물리적 크기의 화면에 두 배 많은 픽셀을 표기하기 때문에 필요에 따라 두 배 큰 이미지를 전송한 후 브라우저에서 표시할 때 크기를 줄일 수 있다. 레티나 디스플레이를 사용하는 사용자는 이미지가 선명하게 보이지만 다른 사용자는 불필요하게 큰 이미지 파일을 다운받도록 하는 것이기도 하다.

사용자에게 어떤 이미지를 전달할지 RESS기법, CSS 미디어 쿼리, picture 태그 등을 활용할 수 있다.

RESS(Responsive web design with server-side components)는 사용자에게 어떤 자원을 제공할지 서버측에서 사용자의 유저 에이전트를 분석하여 화면 크기, 터치 여부 등을 추측하여 제공하는 방식이다. 그러나 이 기법은 사용자 장치의 화면 크기 변화에 올바르게 대응할 수 없다.

CSS 미디어 쿼리를 사용하여 제공할 경우 주의할 점은 브라우저가 예상치 못한 동작을 할 수 있으므로 주기적인 테스트가 필요하다. 예를들어 `display: none`을 설정하는 것으로는 브라우저가 이미지를 다운받는 것을 방지할 수 없다. 배경이미지 역시 동일한데 부모 요소를 `display: none` 설정하거나 미디어 쿼리에서 어떤 파일을 받을지 명시하여 방지할 수 있다.

```css
#parent {
    display: none;
}

#children {
    background: url(...)
}

or

@media ... {
    #children {
      background: url(...)
    }
}
```

최신 브라우저 가장 권장하는 방법은 picture 태그를 사용하는 것이다. picture 태그는 **위에서 아래의 순서대로 확인하면서 일치하는 이미지를 다운받는다.**

```html
<picture>
    <source media="(min-width: 800px)" srcset="big.png">
    <source media="(min-width: 400px)" srcset="small.png">
    <img src="small.png">
</picture>
```

고해상도 이미지를 제공할 때는 `srcset`을 다음과 같이 작성할 수 있다.

```html
<picture>
    <source media="(min-width: 800px)" srcset="big.png 1x, big-hd.png 2x">
    <source media="(min-width: 400px)" srcset="small.png 1x, small-hd.png 2x">
    <img src="small.png">
</picture>
```

`type` 옵션을 사용하여 브라우저 지원하는 파일 타입을 제공할 수도 있다.

```html
<picture>
    <source type="image/svg+xml" srcset="pic.svg">
    <img src="pic.png">
</picture>
```

아래와 같이 브라우저별 최적화 이미지를 제공하기 좋은 방법인 것 같다.

```html
<picture>
   <source srcset="img/my-cute-kitty-cat.webp" type="image/webp">
   <source srcset="img/my-cute-kitty-cat.jxr" type="image/jxr">
   <source srcset="img/my-cute-kitty-cat.jp2" type="image/jp2">
   <source srcset="img/my-cute-kitty-cat.jpg" type="image/jpeg">
   <img src="img/my-cute-kitty-cat.jpg" alt="Photo of my cute Kitty Cat" /> 
</picture>
```

sizes...?

#### 글꼴

글꼴 역시 추가적인 요청이 발생하고 총 페이지의 크기도 증가하기 떄문에 많은 양의 오버헤드를 줄 수 있다. 미디어 쿼리를 이용하여 모바일 사용자가 접근한 경우에는 글꼴을 다운받지 않도록 (대부분의 브라우저는 글꼴이 필요한 상황에서만 명시된 글꼴를 다운받도록 동작함) 하여 사용자의 트래픽을 아낄 수 있다.

### 접근 방법

#### 프로젝트 문서화

사용자가 사용하는 기기가 무엇이든 페이지의 크기나 요청 횟수를 불필요하게 증가시키는 상황을 피하자는 것을 프로젝트 문서에 남겨두는 것이 좋다. 개발할 때 사이트 속도도 타협 대상이 될 수 있다. 상황에 맞는 성능 예산을 정해두고 목표를 얼마나 달성했는지 확인할 것이라는 점도 언급해야 한다. 프로젝트에 참여하는 사람들이 성능에 대한 예상치를 가지도록 돕자. (7장에서 자세히 다룸)

#### 모바일 퍼스트

모바일을 중심으로 생각하면 사이트를 디자인할 때 도움이 된다. 다음의 행동들이 자연스럽게 따라오기 때문이다.

- '이 페이지의 가장 중요한 목적은 무엇인가?'와 같은 핵심적인 질문에 대한 고민
- 사용자에게 가장 중요한 기능과 콘텐츠를 구분
- 재사용할 수 있는 디자인 패턴을 만들고 그것을 화면 크기기에 따라 변경하는 방법 고민
- 사이트 접근성, 인터넷이 느리거나 성능이 낮은 기기에서도 접속이 용이한지 생각

데스크톱 대신 모바일을 중심으로 생각하면 기능을 추가하거나 더 강력한 애니메이션과 스타일을 적용하거나 혹은 새로 출시된 디바이스의 기능을 사용할 때마다 이런 새로운 변화가 성능에 미치는 영향을 추적해서 점진적으로 사이트를 향상시킬 수 있다.

모바일 사용자 경험이 데스크톱보다 무조건 빈약애서는 안된다. 의도적으로 어느정도 줄일수는 있지만 렌더링되는 플랫폼의 한계를 이해하고 난 후 결정한 것이어야 한다. 모바일 버전과 데스크톱 버전 모두가 중요하며 한쪽이 다른 한쪽을 보조하는 관계는 아니다.

모바일을 우선하면 자연스럽게 사용자의 요구 사항에 관심이 생기고 이는 사이트의 성능을 개선하는 데도 도움이 된다. 사용자가 사이트에 바라는바를 이해하면 사용자가 원하는 콘텐츠를 중심으로 보여주는 것에 집중할 수 있다. 작은 화면 크기에 적합한 기능과 콘텐츠가 무엇일지 결정하다보면 저연스럽게 총 페이지 크기와 요청 수도 낮게 유지될 것이다.

반응형 웹사이트를 만들 때 가장 작은 화면을 먼저 고려하는 것이 좋다. 가장 작은 화면에 맞는 CSS를 재정렳하고, 사용자의 화면 크기가 커질 때 필요한 콘텐츠와 기능을 추가하는 점진적 개선을 하자. 화면 크기에 적절한 자원을 제공하고 스크롤하는 과정에서 쟁크(버벅거림)가 없는지 확인하자.

### 모든 것 측정하기

반응형 웹사이트에서도 일반 사이트에서 수행했던 방법대로 테스트를 할 수 있다. 하지만 반응형 웹 디자인 측정에는 몇 가지를 추가적으로 고려해야 한다.

먼저 화면 크기게 맞춰 알맞은 콘텐츠만 제공하고 있는지 확인해야 한다.

가능하면 선택한 기준별로 총 페이지 크기를 측정할 수 있는 자동화 테스트를 구현하자. 크롬 개발자 도구를 활용하여 가상 기기를 활용해 수동으로 테스트 할 수도 있다.

특정 기기가 이미지를 의도한대로 다운받는지 혹은 여러 이미지를 동시에 다운받은 것은 아닌지 주의해서 확인해야 한다.

지속적이고 반복적으로 사이트의 성능을 측정해두면 새로운 기능을 추가할 떄나 사이트가 오래되어서 페이지 로딩 시간을 개선해야 할 때 좋은 참고 자료가 될 것이다. (6장에서 자세히 다룸)
